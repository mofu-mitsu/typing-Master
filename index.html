<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- ▼ サイトの基本情報（ここは真面目に！） -->
    <title>実務データ入力演習ソフト / Typing Master</title>
    <meta name="description" content="就労移行支援や事務職スキル向上のための、実践的なデータ入力・タイピング練習アプリケーションです。ビジネス文書作成からチャット対応まで、実務に近い形式でトレーニングできます。">
    <meta name="keywords" content="タイピング練習, データ入力, 事務職, 職業訓練, 業務シミュレーション">
    <meta name="author" content="mofumitsu">

    <!-- ▼ OGP設定（SNSでシェアした時の見え方） -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mofu-mitsu.github.io/typing-Master/">
    <meta property="og:title" content="実務データ入力演習ソフト / Typing Master">
    <meta property="og:description" content="【職業訓練用】ビジネス文書・名簿入力・チャット対応など、実務を想定したタイピング練習ツールです。">
    <meta property="og:image" content="https://mofu-mitsu.github.io/typing-Master/images/ogp.png"> <!-- ★あとで画像作ったらここに入れる -->
    <meta property="og:site_name" content="Typing Master">
    <meta property="og:locale" content="ja_JP">

    <!-- ▼ Twitter Card設定 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="実務データ入力演習ソフト">
    <meta name="twitter:description" content="事務職に必要な入力スキルを効率的に習得できるブラウザアプリ。">
    <meta name="twitter:image" content="https://mofu-mitsu.github.io/typing-Master/images/ogp.png">

    <!-- ▼ ファビコン設定（タブのアイコン） -->
    <link rel="icon" href="images/favicon.ico"> <!-- ★あとで作ったらここに入れる -->
    <link rel="apple-touch-icon" href="images/icon.png"> <!-- スマホのホーム画面用 -->

    <!-- ▼ スマホのブラウザの色（ここはこっそりピンクにしちゃう？ｗ） -->
    <meta name="theme-color" content="#ffb7d2">

    <!-- ▼ Font Awesome & CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 1. スタート画面（メニュー） -->
    <div id="start-screen">
        <div class="menu-card">
            <div class="menu-header">
                <i class="fa-solid fa-keyboard fa-3x"></i>
                <h1>Typing Master</h1>
                <p>事務職のためのタイピングスキル向上プログラム</p>
            </div>
            
            <div class="setting-area">
                <!-- コース選択 -->
                <div class="setting-group">
                    <label><i class="fa-solid fa-briefcase"></i> 研修コース選択</label>
                    <select id="mode-select" onchange="updateSubMode()">
                        <option value="business">🏢 一般企業 実務コース</option>
                        <option value="school">🏫 教育機関（とりの丘）実習コース</option>
                    </select>
                </div>

                <!-- 学校コースを選んだ時だけ出る詳細設定 -->
                <div class="setting-group hidden" id="sub-mode-group">
                    <label><i class="fa-solid fa-list-check"></i> 業務内容</label>
                    <!-- 業務内容を変えるとクラス選択肢も変わるように onchange を設定 -->
                    <select id="sub-mode-select" onchange="updateClassOptions()">
                        <option value="roster">📋 生徒名簿データ登録</option>
                        <option value="instruction">📣 先生の指示・業務連絡</option>
                        <option value="line">💬 生徒連絡（チャット）対応</option>
                        <option value="request">🙏 生徒からの依頼（DM）</option>
                        <option value="chat">🗣️ グループチャット参加</option>
                        <option value="mix">⭐ 総合実務（ランダム）</option>
                    </select>
                </div>

                <!-- クラス選択（ここにあった余分な </div> を削除したよ！） -->
                <div class="setting-group hidden" id="class-select-group">
                    <label><i class="fa-solid fa-users"></i> 対象クラス（任意）</label>
                    <select id="class-select">
                        <option value="all">指定なし（全校生徒）</option>
                        <option value="1-1">1年1組</option>
                        <option value="1-2">1年2組</option>
                        <option value="1-4">1年4組</option>
                        <option value="2-1">2年1組</option>
                        <option value="2-2">2年2組</option>
                        <option value="3-1">3年1組</option>
                        <option value="3-2">3年2組</option>
                        <option value="teacher">教職員</option>
                    </select>
                </div>

                <!-- 課題数 -->
                <div class="setting-group">
                    <label><i class="fa-solid fa-stopwatch"></i> 課題数</label>
                    <select id="count-select">
                        <option value="5">5問（クイック）</option>
                        <option value="10">10問（スタンダード）</option>
                        <option value="20">20問（ハード）</option>
                    </select>
                </div>
            </div> <!-- setting-area の閉じタグはここが正解！ -->

            <button class="start-btn" onclick="initGame()">
                研修を開始する <i class="fa-solid fa-play"></i>
            </button>
        </div>
    </div>

    <!-- 2. ゲーム画面 -->
    <div id="game-container" class="hidden">
        
        <header id="header">
            <div class="header-left">
                <h1 id="app-title">実務データ入力演習</h1>
                <div id="sub-info"><i class="fa-solid fa-id-card"></i> 教務課・データ管理担当</div>
            </div>
            <div class="header-right">
                <!-- ★音量切り替えボタン -->
                <button id="sound-btn" onclick="toggleSound()">
                    <i id="sound-icon" class="fa-solid fa-volume-high"></i>
                </button>
                <button id="back-btn" onclick="location.reload()">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i> 終了
                </button>
            </div>
        </header>

        <main>
            <!-- ステータスバー -->
            <div id="status-bar">
                <div class="status-item"><i class="fa-solid fa-layer-group"></i> 残り: <span id="count-display">0</span>問</div>
                <div class="status-item"><i class="fa-solid fa-clock"></i> Time: <span id="time-display">0.0</span>s</div>
            </div>

            <!-- お題エリア -->
            <div id="question-area">
                <!-- キャラ画像 -->
                <div id="char-image-box" class="hidden">
                    <img id="char-img" src="" alt="Character">
                </div>

                <!-- チャット風の送信者名 -->
                <div id="sender-info" class="hidden">
                    <i class="fa-solid fa-user-circle"></i> <span id="sender-name"></span>
                </div>
                
                <!-- お題テキスト -->
                <div id="display-text"></div>
                
                <!-- かな読み -->
                <div id="reading-text"></div>
            </div>

            <!-- キャラのセリフ（リアクション） -->
            <div id="char-comment-box">
                <span id="char-comment"></span>
            </div>

            <!-- タイピング入力エリア -->
            <div id="input-area">
                <div id="romaji-display"></div>
                <!-- 常にここにフォーカスを当てる -->
                <input type="text" id="type-input" autocomplete="off" spellcheck="false" disabled>
            </div>

            <!-- キーボードガイド -->
            <div id="keyboard-guide">
                <div class="key-row">
                    <div class="key" data-key="q">Q</div><div class="key" data-key="w">W</div><div class="key" data-key="e">E</div><div class="key" data-key="r">R</div><div class="key" data-key="t">T</div><div class="key" data-key="y">Y</div><div class="key" data-key="u">U</div><div class="key" data-key="i">I</div><div class="key" data-key="o">O</div><div class="key" data-key="p">P</div>
                </div>
                <div class="key-row">
                    <div class="key" data-key="a">A</div><div class="key" data-key="s">S</div><div class="key" data-key="d">D</div><div class="key" data-key="f">F</div><div class="key" data-key="g">G</div><div class="key" data-key="h">H</div><div class="key" data-key="j">J</div><div class="key" data-key="k">K</div><div class="key" data-key="l">L</div><div class="key" data-key="-">-</div>
                </div>
                <div class="key-row">
                    <div class="key" data-key="z">Z</div><div class="key" data-key="x">X</div><div class="key" data-key="c">C</div><div class="key" data-key="v">V</div><div class="key" data-key="b">B</div><div class="key" data-key="n">N</div><div class="key" data-key="m">M</div><div class="key" data-key=",">,</div><div class="key" data-key=".">.</div><div class="key" data-key="/">/</div>
                </div>
                <div class="key-row">
                    <div class="key space-key" data-key=" ">Space</div>
                </div>
            </div>
        </main>
    </div>

    <!-- ↓ 結果画面（result-box）の中身を大幅改造！ ↓ -->
    <div id="result-screen" class="hidden">
        <div class="result-box">
            <div id="rank-badge">-</div> <!-- ランクSとか出る場所 -->
            <h2 id="result-title">業務完了</h2>
            
            <div class="result-grid">
                <div class="result-item">
                    <span class="label">スコア</span>
                    <span class="value" id="result-score">0</span>
                </div>
                <div class="result-item">
                    <span class="label">ランク</span>
                    <span class="value" id="result-rank">-</span>
                </div>
                <div class="result-item">
                    <span class="label">タイム</span>
                    <span class="value"><span id="result-time">0.0</span>s</span>
                </div>
                <div class="result-item">
                    <span class="label">ミス</span>
                    <span class="value" id="result-miss">0</span>
                </div>
            </div>

            <!-- ★新機能：ベストスコア比較 & 苦手キー -->
            <div class="analysis-area">
                <p id="best-score-info"><i class="fa-solid fa-crown"></i> 自己ベスト: ---</p>
                <div id="weak-keys-area">
                    <p>⚠️ 苦手なキー</p>
                    <div id="weak-keys-list">なし</div>
                </div>
            </div>

            <p id="result-msg" class="msg-text"></p>
            <button onclick="location.reload()" class="retry-btn"><i class="fa-solid fa-rotate-right"></i> タイトルに戻る</button>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>
